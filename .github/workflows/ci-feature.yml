name: Check All Browser Versions

on:
  push:
    branches: 
      - 'feature/*'
      - 'bugfix/*'
  workflow_dispatch:

concurrency:
  group: browser-checks-${{ github.ref }}
  cancel-in-progress: true

jobs:
  check-browser-versions:
    name: Check on ${{ matrix.os }}
    runs-on: ${{ matrix.os }}
    strategy:
      matrix:
        os: [windows-latest]
    
    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Check browser versions on Windows
        if: runner.os == 'Windows'
        shell: powershell
        run: |
          Write-Output "--- Checking Browser Versions on Windows ---"

          # Chrome
          $chromePath = "$env:PROGRAMFILES\Google\Chrome\Application\chrome.exe"
          if (-not (Test-Path $chromePath)) {
              $chromePath = "$env:PROGRAMFILES(x86)\Google\Chrome\Application\chrome.exe"
          }
          if (Test-Path $chromePath) {
              $versionInfo = Get-Item -Path $chromePath
              Write-Output "Google Chrome: $($versionInfo.VersionInfo.ProductVersion)"
          } else {
              Write-Warning "Google Chrome not found."
          }

          # Firefox
          $firefoxPath = "$env:PROGRAMFILES\Mozilla Firefox\firefox.exe"
          if (Test-Path $firefoxPath) {
              $versionInfo = Get-Item -Path $firefoxPath
              Write-Output "Mozilla Firefox: $($versionInfo.VersionInfo.ProductVersion)"
          } else {
              Write-Warning "Mozilla Firefox not found."
          }

          # Edge (Using a more robust method to find the executable path)
          Write-Output "--- Checking Microsoft Edge ---"
          $edgePath = (Get-ItemPropertyValue -LiteralPath "HKLM:\SOFTWARE\Microsoft\Windows\CurrentVersion\App Paths\msedge.exe" -Name "(default)")
          if ($edgePath) {
              $versionInfo = Get-Item -Path $edgePath
              Write-Output "Microsoft Edge: $($versionInfo.VersionInfo.ProductVersion)"
          } else {
              Write-Warning "Microsoft Edge not found via App Paths registry key."
          }
          
          # Safari (not available on Windows)
          Write-Output "Apple Safari: Not available on Windows."
